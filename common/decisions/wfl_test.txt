wfl_test_category = {
	wfl_test_decision_1 = {
		name = wfl_test_decision_1.t
		icon = decision_category_generic_propaganda
		available = {
			custom_trigger_tooltip = {
				tooltip = wfl_test_trigger_tt
				set_temp_variable = {
					temp_num_ships = num_ships
				}
				divide_temp_variable = {
					temp_num_ships = FROM.num_ships
				}
				check_variable = {
					var = temp_num_ships
					value = 2
					compare = greater_than_or_equals
				}
			}
		}
		visible = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
		fire_only_once = no
		cost = 10
		days_re_enable = 1
		#on_map_mode = map_only
		target_trigger = {
			FROM = {
				any_owned_state = {
					is_coastal = yes
				}
			}
		}
		complete_effect = {
		}
	}
	wfl_test_decision_2 = {
		name = wfl_test_decision_2.t
		icon = decision_category_generic_propaganda
		available = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = wfl_net_flota
					FROM = {
						check_variable = {
							num_ships = 0
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = wfl_test_trigger_tt
					set_temp_variable = {
						temp_fleet_strength = num_ships_with_type@submarine
					}
					add_to_temp_variable = {
						temp_fleet_strength = num_ships_with_type@destroyer
					}
					add_to_temp_variable = {
						temp_fleet_strength = num_ships_with_type@light_cruiser
					}
					#heavy
					set_temp_variable = {
						temp_var = num_ships_with_type@heavy_cruiser
					}
					add_to_temp_variable = {
						temp_var = num_ships_with_type@battle_cruiser
					}
					multiply_temp_variable = {
						temp_var = 4
					}
					add_to_temp_variable = {
						temp_fleet_strength = temp_var
					}
					#super heavy
					set_temp_variable = {
						temp_var = num_ships_with_type@battleship
					}
					add_to_temp_variable = {
						temp_var = num_ships_with_type@carrier
					}
					multiply_temp_variable = {
						temp_var = 8
					}
					add_to_temp_variable = {
						temp_fleet_strength = temp_var
					}
					#target fleet
					set_temp_variable = {
						temp_fleet_strength_terget = FROM.num_ships_with_type@submarine
					}
					add_to_temp_variable = {
						temp_fleet_strength_terget = FROM.num_ships_with_type@destroyer
					}
					add_to_temp_variable = {
						temp_fleet_strength_terget = FROM.num_ships_with_type@light_cruiser
					}
					#heavy
					set_temp_variable = {
						temp_var = FROM.num_ships_with_type@heavy_cruiser
					}
					add_to_temp_variable = {
						temp_var = FROM.num_ships_with_type@battle_cruiser
					}
					multiply_temp_variable = {
						temp_var = 4
					}
					add_to_temp_variable = {
						temp_fleet_strength_terget = temp_var
					}
					#super heavy
					set_temp_variable = {
						temp_var = FROM.num_ships_with_type@battleship
					}
					add_to_temp_variable = {
						temp_var = FROM.num_ships_with_type@carrier
					}
					multiply_temp_variable = {
						temp_var = 8
					}
					add_to_temp_variable = {
						temp_fleet_strength_terget = temp_var
					}
					divide_temp_variable = {
						temp_fleet_strength = temp_fleet_strength_terget
					}
					check_variable = {
						var = temp_fleet_strength
						value = 2
						compare = greater_than_or_equals
					}
				}
			}
		}
		visible = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
		fire_only_once = no
		cost = 10
		days_re_enable = 1
		#on_map_mode = map_only
		target_trigger = {
			FROM = {
				any_owned_state = {
					is_coastal = yes
				}
			}
		}
		complete_effect = {
		}
	}
	wfl_test_decision_3 = {
		name = wfl_test_decision_3.t
		icon = decision_category_generic_propaganda
		available = {
			custom_trigger_tooltip = {
				tooltip = wfl_test_trigger_tt
				if = {
					limit = {
						check_variable = {
							num_ships > 0
						}
					}
					if = {
						limit = {
							FROM = {
								check_variable = {
									num_ships > 0
								}
							}
						}
						set_temp_variable = {
							temp_fleet_strength = num_ships_with_type@submarine
						}
						add_to_temp_variable = {
							temp_fleet_strength = num_ships_with_type@destroyer
						}
						add_to_temp_variable = {
							temp_fleet_strength = num_ships_with_type@light_cruiser
						}
						#heavy
						set_temp_variable = {
							temp_var = num_ships_with_type@heavy_cruiser
						}
						add_to_temp_variable = {
							temp_var = num_ships_with_type@battle_cruiser
						}
						multiply_temp_variable = {
							temp_var = 4
						}
						add_to_temp_variable = {
							temp_fleet_strength = temp_var
						}
						#super heavy
						set_temp_variable = {
							temp_var = num_ships_with_type@battleship
						}
						add_to_temp_variable = {
							temp_var = num_ships_with_type@carrier
						}
						multiply_temp_variable = {
							temp_var = 8
						}
						add_to_temp_variable = {
							temp_fleet_strength = temp_var
						}
						#target fleet
						set_temp_variable = {
							temp_fleet_strength_terget = FROM.num_ships_with_type@submarine
						}
						add_to_temp_variable = {
							temp_fleet_strength_terget = FROM.num_ships_with_type@destroyer
						}
						add_to_temp_variable = {
							temp_fleet_strength_terget = FROM.num_ships_with_type@light_cruiser
						}
						#heavy
						set_temp_variable = {
							temp_var = FROM.num_ships_with_type@heavy_cruiser
						}
						add_to_temp_variable = {
							temp_var = FROM.num_ships_with_type@battle_cruiser
						}
						multiply_temp_variable = {
							temp_var = 4
						}
						add_to_temp_variable = {
							temp_fleet_strength_terget = temp_var
						}
						#super heavy
						set_temp_variable = {
							temp_var = FROM.num_ships_with_type@battleship
						}
						add_to_temp_variable = {
							temp_var = FROM.num_ships_with_type@carrier
						}
						multiply_temp_variable = {
							temp_var = 8
						}
						add_to_temp_variable = {
							temp_fleet_strength_terget = temp_var
						}
						divide_temp_variable = {
							temp_fleet_strength = temp_fleet_strength_terget
						}
						check_variable = {
							var = temp_fleet_strength
							value = 2
							compare = greater_than_or_equals
						}
					}
					else = {
						always = yes
					}
				}
				else = {
					always = no
				}
			}
		}
		visible = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
		fire_only_once = no
		cost = 10
		days_re_enable = 1
		#on_map_mode = map_only
		target_trigger = {
			FROM = {
				any_owned_state = {
					is_coastal = yes
				}
			}
		}
		complete_effect = {
		}
	}
	wfl_test_decision_4 = {
		available = {
			267 = {
				state_population > 1000000
			}
		}
		complete_effect = {
			267 = {
				if = {
					limit = {
						state_population < 1000000
					}
					ROOT = {
						add_manpower = -100000
					}
					add_manpower = 100000
				}
				else_if = {
					limit = {
						state_population < 5000000
					}
					ROOT = {
						add_manpower = -250000
					}
					add_manpower = 250000
				}
				else_if = {
					limit = {
						state_population < 10000000
					}
					ROOT = {
						add_manpower = -500000
					}
					add_manpower = 500000
				}
				else = {
					ROOT = {
						add_manpower = -1000000
					}
					add_manpower = 1000000
				}
			}
		}
	}
	wfl_create_puppet_decision_2 = {
		name = wfl_create_puppet_decision.t
		available = {
			has_war = no
			ic_ratio = {
				tag = FROM
				ratio > 1.5
			}
			strength_ratio = {
				tag = FROM
				ratio > 1.5
			}
			FROM = {
				has_war = no
				has_opinion = {
					target = ROOT
					value > 49
				}
			}
		}
		visible = {
			FROM = {
				OR = {
					any_neighbor_country = {
						is_puppet_of = ROOT
					}
					is_neighbor_of = ROOT
				}
				NOT = {
					OR = {
						is_in_faction_with = ROOT
						is_puppet_of = ROOT
						is_major = yes
					}
				}
			}
		}
		#target_array = neighbors
		target_trigger = {
			FROM = {
				OR = {
					any_neighbor_country = {
						is_puppet_of = ROOT
					}
					is_neighbor_of = ROOT
				}
				NOT = {
					OR = {
						is_in_faction_with = ROOT
						is_puppet_of = ROOT
						is_major = yes
					}
				}
			}
		}
		ai_will_do = {
			base = 2
			modifier = {
				OR = {
					has_country_leader = {
						name = "Anastasia"
					}
					has_country_leader = {
						name = "Anastasia I"
					}
				}
				add = 3
			}
		}
		fire_only_once = no
		cost = 300
		#days_re_enable = 180
		days_remove = 180
		modifier = {
			political_power_gain = -1
		}
		complete_effect = {
		}
		remove_effect = {
			puppet = FROM
			FROM = {
				add_ideas = {
					wfl_waifuland_puppet
					waifuland_assistance
				}
				hidden_effect = {
					if = {
						limit = {
							has_idea = ENG_guided_by_britain_raj_2
						}
						remove_ideas = ENG_guided_by_britain_raj_2
					}
					if = {
						limit = {
							has_idea = ENG_guided_by_britain_raj_1
						}
						remove_ideas = ENG_guided_by_britain_raj_1
					}
					if = {
						limit = {
							has_idea = ENG_guided_by_britain_2
						}
						remove_ideas = ENG_guided_by_britain_2
					}
					if = {
						limit = {
							has_idea = ENG_guided_by_britain_1
						}
						remove_ideas = ENG_guided_by_britain_1
					}
				}
			}
			add_named_threat = {
				threat = 5
				name = wfl_create_puppet_threat
			}
		}
	}
}

wfl_declare_war_decisions = {
	wfl_declare_war_decision = {
		name = wfl_declare_war_decision.t
		allowed = {
			always = yes
		}
		available = {
			#has_war = no
			#has_completed_focus = wfl_world_conquest
			FROM = {
				is_neighbor_of = ROOT
				NOT = {
					is_in_faction_with = ROOT
				}
			}
		}
		visible = {
			#has_completed_focus = wfl_world_conquest
			FROM = {
				is_neighbor_of = ROOT
				NOT = {
					is_in_faction_with = ROOT
				}
			}
		}
		target_trigger = {
			FROM = {
				is_neighbor_of = ROOT
				NOT = {
					is_in_faction_with = ROOT
				}
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 0.5
				has_government = fascism
			}
			modifier = {
				add = 0.5
				has_government = communism
			}
			modifier = {
				add = 0.5
				has_government = democratic
			}
			modifier = {
				add = 0.5
				has_government = neutrality
			}
			modifier = {
				add = 1
				has_government = waifuism
			}
		}
		fire_only_once = no
		cost = 300
		days_re_enable = 180
		#on_map_mode = map_only
		complete_effect = {
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
}

wfl_debug_category = {
	wfl_coring_decision2 = {
		name = wfl_coring_state.t
		icon = generic_nationalism
		#icon = generic_form_nation
		allowed = {
			always = no
		}
		available = {
			#has_war = no
			FROM = {
				set_temp_variable = {
					coring_ppcost = 200
				}
				add_to_temp_variable = {
					coring_ppcost = resistance
				}
				subtract_from_temp_variable = {
					coring_ppcost = compliance
				}
			}
			ROOT = {
				#has_manpower > 10000
				set_temp_variable = {
					temp1 = FROM.state_population
				}
				divide_temp_variable = {
					temp1 = 100
				}
				has_manpower > temp1
				#has_manpower = var:state_population
			}
		}
		ai_will_do = {
			factor = 3
		}
		state_target = yes
		on_map_mode = map_and_decisions_view
		target_array = owned_controlled_states
		target_trigger = {
			FROM = {
				NOT = {
					is_core_of = ROOT
				}
				#compliance > 10
			}
		}
		cost = coring_ppcost
		fire_only_once = yes
		days_remove = 90
		modifier = {
			stability_factor = -0.025
		}
		complete_effect = {
			FROM = {
				set_variable = {
					man_cost = state_population
				}
				divide_variable = {
					man_cost = 100
				}
				set_temp_variable = {
					temp1 = man_cost
				}
				multiply_temp_variable = {
					temp1 = 2
				}
				subtract_from_variable = {
					man_cost = temp1
				}
			}
			ROOT = {
				set_temp_variable = {
					temp1 = FROM.state_population
				}
				divide_temp_variable = {
					temp1 = 100
				}
				set_temp_variable = {
					temp2 = temp1
				}
				multiply_temp_variable = {
					temp2 = 2
				}
				subtract_from_variable = {
					temp1 = temp2
				}
				add_manpower = temp1
			}
		}
		remove_effect = {
			FROM = {
				#add_core_of = ROOT
				wfl_coring_state = yes
				set_temp_variable = {
					temp1 = state_population
				}
				divide_temp_variable = {
					temp1 = 100
				}
				add_manpower = temp1
			}
			#add_manpower = -100000
		}
	}
}

wfl_infiltration_decisions = {
	wfl_infiltration_decision = {
		name = wfl_infiltration_decision.t
		#icon = generic_nationalism
		icon = generic_form_nation
		allowed = {
			always = yes
		}
		available = {
			has_war = no
			has_manpower > 10000
		}
		visible = {
			FROM = {
				NOT = {
					controller = {
						tag = ROOT
					}
				}
				OWNER = {
					NOT = {
						OR = {
							is_in_faction_with = ROOT
							is_puppet_of = ROOT
						}
					}
				}
			}
		}
		ai_will_do = {
			#base = 100
			factor = 1
		}
		state_target = yes
		on_map_mode = map_and_decisions_view
		target_trigger = {
			FROM = {
				AND = {
					NOT = {
						controller = {
							tag = ROOT
						}
						OR = {
							is_core_of = ROOT
							is_claimed_by = ROOT
						}
					}
					any_neighbor_state = {
						controller = {
							tag = ROOT
						}
					}
					OWNER = {
						NOT = {
							OR = {
								is_in_faction_with = ROOT
								is_puppet_of = ROOT
							}
						}
					}
				}
			}
		}
		cost = 100
		fire_only_once = yes
		days_remove = 30
		modifier = {
			#stability_factor = -0.001
		}
		complete_effect = {
		}
		remove_effect = {
			FROM = {
				#add_core_of = ROOT
				add_claim_by = ROOT
			}
			ROOT = {
				add_manpower = -10000
			}
		}
	}
}

wfl_coring_category = {
	wfl_coring_decision = {
		name = wfl_coring_state.t
		icon = generic_nationalism
		#icon = generic_form_nation
		allowed = {
			always = yes
		}
		available = {
			#has_war = no
			FROM = {
				set_temp_variable = {
					coring_ppcost = 100
				}
				add_to_temp_variable = {
					coring_ppcost = resistance
				}
				subtract_from_temp_variable = {
					coring_ppcost = compliance
				}
			}
		}
		visible = {
			FROM = {
				NOT = {
					is_core_of = ROOT
				}
			}
		}
		ai_will_do = {
			factor = 3
		}
		state_target = yes
		on_map_mode = map_and_decisions_view
		#target_array = owned_controlled_states
		target_array = owned_states
		target_trigger = {
			FROM = {
				NOT = {
					is_core_of = ROOT
				}
			}
		}
		cost = coring_ppcost
		fire_only_once = yes
		days_remove = 30
		modifier = {
			stability_factor = -0.025
		}
		complete_effect = {
		}
		cancel_trigger = {
			FROM = {
				is_core_of = ROOT
			}
		}
		remove_effect = {
			FROM = {
				#add_core_of = ROOT
				wfl_coring_state = yes
			}
			#add_manpower = -100000
		}
		cancel_effect = {
			add_political_power = 50
		}
	}
}

wfl_propaganda_waifuism_category = {
	wfl_propaganda_waifuism_decision = {
		name = wfl_propaganda_waifuism_decision.t
		icon = decision_category_generic_propaganda
		visible = {
			check_variable = {
				var = wfl_propaganda_count
				value = 3
				compare = less_than
			}
		}
		available = {
			has_tech = radio
			custom_trigger_tooltip = {
				tooltip = wfl_propaganda_waifuism_decision_tt
				check_variable = {
					var = wfl_propaganda_count
					value = 3
					compare = less_than
				}
			}
		}
		ai_will_do = {
			base = 1
			modifier = {
				OR = {
					has_country_leader = {
						name = "Anastasia"
					}
					has_country_leader = {
						name = "Anastasia I"
					}
				}
				add = 2
			}
		}
		fire_only_once = no
		cost = 50
		days_re_enable = 30
		complete_effect = {
			add_to_variable = {
				wfl_propaganda_count = 1
			}
			set_temp_variable = {
				ppower = 0.001
			}
			multiply_temp_variable = {
				ppower = owned_states
			}
			random_other_country = {
				limit = {
					waifuism < 0.01
					exists = yes
				}
				add_popularity = {
					ideology = waifuism
					popularity = var:ppower
				}
				add_timed_idea = {
					idea = waifu_influence
					days = 30
				}
			}
			IF = {
				LIMIT = {
					NOT = {
						has_country_flag = radio_waifu_run
					}
				}
				news_event = {
					id = wfl_news.6
					hours = 5
				}
				set_country_flag = radio_waifu_run
			}
		}
	}
	wfl_propaganda_waifuism_in_country_decision = {
		name = wfl_propaganda_waifuism_in_country_decision.t
		icon = decision_category_generic_propaganda
		visible = {
			has_country_flag = radio_waifu_run
			FROM = {
				waifuism > 0
				waifuism < 0.6
				exists = yes
			}
		}
		available = {
			FROM = {
				waifuism > 0
				waifuism < 0.6
			}
		}
		target_trigger = {
			always = yes
		}
		ai_will_do = {
			base = 1.5
			modifier = {
				OR = {
					has_country_leader = {
						name = "Anastasia"
					}
					has_country_leader = {
						name = "Anastasia I"
					}
				}
				add = 0.5
			}
		}
		fire_only_once = no
		cost = 100
		days_re_enable = 30
		#on_map_mode = map_only
		complete_effect = {
			set_temp_variable = {
				ppower = 0.001
			}
			multiply_temp_variable = {
				ppower = owned_states
			}
			FROM = {
				add_popularity = {
					ideology = waifuism
					popularity = var:ppower
				}
				add_timed_idea = {
					idea = waifu_influence
					days = 30
				}
			}
		}
	}
	wfl_ignite_the_waifuism_civil_war_in_country_decision = {
		name = wfl_ignite_the_waifuism_civil_war_in_country_decision.t
		icon = generic_ignite_civil_war
		available = {
			FROM = {
				#has_stability < 0.5
				waifuism > 0.3
			}
		}
		visible = {
			has_country_flag = radio_waifu_run
			FROM = {
				NOT = {
					has_government = waifuism
				}
				exists = yes
			}
		}
		fire_only_once = yes
		cost = 300
		complete_effect = {
			FROM = {
				if = {
					limit = {
						has_government = democratic
					}
					set_variable = {
						var = civil_war_size_var
						value = party_popularity@democratic
					}
				}
				if = {
					limit = {
						has_government = communism
					}
					set_variable = {
						var = civil_war_size_var
						value = party_popularity@communism
					}
				}
				if = {
					limit = {
						has_government = neutrality
					}
					set_variable = {
						var = civil_war_size_var
						value = party_popularity@neutrality
					}
				}
				if = {
					limit = {
						has_government = fascism
					}
					set_variable = {
						var = civil_war_size_var
						value = party_popularity@fascism
					}
				}
				subtract_from_variable = {
					var = civil_war_size_var
					value = army_support_var
				}
				if = {
					limit = {
						check_variable = {
							var = civil_war_size_var
							value = 0.3
							compare = less_than
						}
					}
					set_variable = {
						var = civil_war_size_var
						value = 0.3
					}
				}
				start_civil_war = {
					ruling_party = waifuism
					ideology = ROOT
					size = civil_war_size_var
					keep_unit_leaders_trigger = {
						has_trait = hidden_sympathies
					}
				}
				set_country_flag = ideology_civil_war
			}
		}
		ai_will_do = {
			base = 2
			modifier = {
				OR = {
					has_country_leader = {
						name = "Anastasia"
					}
					has_country_leader = {
						name = "Anastasia I"
					}
				}
				add = 3
			}
		}
	}
}

wfl_investments_abroad_category = {
	wfl_investments_abroad_decision = {
		name = wfl_investments_abroad_decision.t
		icon = generic_construction
		visible = {
			FROM = {
				#is_capital = yes
				CONTROLLER = {
					NOT = {
						OR = {
							tag = ROOT
							is_puppet_of = ROOT
							has_war_with = ROOT
						}
					}
				}
			}
		}
		available = {
			FROM = {
				free_building_slots = {
					building = industrial_complex
					size > 0
					include_locked = yes
				}
			}
			num_of_civilian_factories_available_for_projects > 4
		}
		modifier = {
			civilian_factory_use = 5
		}
		ai_will_do = {
			base = 1
			modifier = {
				has_country_leader = {
					name = "Erza"
				}
				add = 1
			}
			modifier = {
				FROM.OWNER = {
					check_variable = {
						owned_states < 2
					}
				}
				add = 1
			}
			modifier = {
				FROM.OWNER = {
					check_variable = {
						var = wfl_investments_count
						value = 0
						compare = greater_than
					}
				}
				add = 10
			}
			modifier = {
				FROM.OWNER = {
					check_variable = {
						var = mtth:wfl_get_investments_count
						value = mtth:wfl_puppet_cost
						compare = greater_than_or_equals
					}
				}
				add = -100
			}
			modifier = {
				num_of_civilian_factories_available_for_projects < 20
				add = -100
			}
			modifier = {
				num_of_civilian_factories_available_for_projects > 34
				add = 100
			}
		}
		state_target = yes
		on_map_mode = map_only
		#target_array = all_states
		target_trigger = {
			FROM = {
				#is_capital = yes
				CONTROLLER = {
					NOT = {
						OR = {
							tag = ROOT
							is_puppet_of = ROOT
						}
					}
				}
			}
		}
		cost = 100
		fire_only_once = no
		days_remove = 30
		remove_effect = {
			FROM = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				OWNER = {
					add_to_variable = {
						wfl_investments_count = 1
					}
				}
			}
		}
	}
	wfl_create_puppet_decision2 = {
		name = wfl_create_puppet_decision2.t
		icon = wfl_create_puppet_decision
		visible = {
			FROM = {
				NOT = {
					is_puppet_of = ROOT
				}
				check_variable = {
					var = wfl_investments_count
					value = 0
					compare = greater_than
				}
				exists = yes
			}
		}
		ai_will_do = {
			factor = 1000
		}
		available = {
			FROM = {
				has_war = no
			}
			custom_trigger_tooltip = {
				tooltip = wfl_create_puppet_decision_tt
				check_variable = {
					var = mtth:wfl_get_investments_count
					value = mtth:wfl_puppet_cost
					compare = greater_than_or_equals
				}
			}
		}
		#state_target = yes
		#on_map_mode = map_only
		#target_array = all_states
		target_trigger = {
			FROM = {
				NOT = {
					is_puppet_of = ROOT
				}
			}
		}
		cost = 300
		fire_only_once = no
		complete_effect = {
			puppet = FROM
		}
	}
}
